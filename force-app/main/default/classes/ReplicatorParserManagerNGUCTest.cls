@isTest

public with sharing class ReplicatorParserManagerNGUCTest {
    
    public static String isOsakaDormant = System.Label.Is_Osaka_Dormant_21_09;
    //Test for 1 lone service with 4 services 2 each attached to groups
    @IsTest
    public static void testOneLoneService(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7005109R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"enterprise"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7740924R","linkedServiceRole":"group"},{"linkedServiceId":"N7740929R","linkedServiceRole":"group"},{"linkedServiceId":"0749679300","linkedServiceRole":"service"},{"linkedServiceId":"0749679400","linkedServiceRole":"service"},{"linkedServiceId":"0749679500","linkedServiceRole":"service"},{"linkedServiceId":"0749679700","linkedServiceRole":"service"},{"linkedServiceId":"0749679100","linkedServiceRole":"service"}],"serviceExtensions":[]},{"cidn":"9501331856","productFamily":"TIPT-SIPC","fnn":"N7740924R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"group"},{"name":"inflight_order","value":"N"},{"name":"is_enterprise_trunk","value":"Y"},{"name":"trunk_capacity","value":"20"},{"name":"bw_eligibility_flag","value":"Eligible"},{"name":"bw_eligibility_reason_code","value":""}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"0749679300","linkedServiceRole":"service"},{"linkedServiceId":"0749679300","linkedServiceRole":"service"},{"linkedServiceId":"0749679500","linkedServiceRole":"service"}],"serviceExtensions":[]},{"cidn":"9501331857","productFamily":"TIPT-SIPC","fnn":"0749679300","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"N7740924R","linkedServiceRole":"group"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679300","serviceExtensionTo":"0749679399"}]},{"cidn":"9501331858","productFamily":"TIPT-SIPC","fnn":"0749679400","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679400","serviceExtensionTo":"0749679479"}]},{"cidn":"9501331859","productFamily":"TIPT-SIPC","fnn":"0749679500","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"N7740924R","linkedServiceRole":"group"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679500","serviceExtensionTo":"0749679599"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7740929R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"group"},{"name":"inflight_order","value":"N"},{"name":"is_enterprise_trunk","value":"Y"},{"name":"trunk_capacity","value":"20"},{"name":"bw_eligibility_flag","value":"Eligible"},{"name":"bw_eligibility_reason_code","value":""}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"0749679700","linkedServiceRole":"service"},{"linkedServiceId":"0749679100","linkedServiceRole":"service"}],"serviceExtensions":[]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679700","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"N7740929R","linkedServiceRole":"group"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679700","serviceExtensionTo":"0749679799"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679100","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"N7740929R","linkedServiceRole":"group"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679100","serviceExtensionTo":"0749679199"}]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assertEquals( 3  ,resp.serviceList[0].groupType.size() , '3 groups should have been created , as one will be dummy' );
        
    }
    
    // Case-2 : Input with no GE [Ennterprise] ; 
    @IsTest
    public static void test_1(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331857","productFamily":"TIPT-SIPC","fnn":"0749679300","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679300","serviceExtensionTo":"0749679399"}]},{"cidn":"9501331858","productFamily":"TIPT-SIPC","fnn":"0749679400","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679400","serviceExtensionTo":"0749679479"}]},{"cidn":"9501331859","productFamily":"TIPT-SIPC","fnn":"0749679500","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679500","serviceExtensionTo":"0749679599"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679700","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679700","serviceExtensionTo":"0749679799"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679100","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679100","serviceExtensionTo":"0749679199"}]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assertEquals( 1  ,resp.serviceList[0].groupType.size() , '1 group will be created that contins all services' );
        
        
    }
    
    
    // Case 3 : Input with no GK3.
    @IsTest
    public static void test_2(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7005109R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"enterprise"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7740924R","linkedServiceRole":"group"},{"linkedServiceId":"0749679300","linkedServiceRole":"service"},{"linkedServiceId":"0749679400","linkedServiceRole":"service"}],"serviceExtensions":[]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7740924R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"group"},{"name":"inflight_order","value":"N"},{"name":"is_enterprise_trunk","value":"Y"},{"name":"trunk_capacity","value":"20"},{"name":"bw_eligibility_flag","value":"eligible"},{"name":"bw_eligibility_reason_code","value":""}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"0749679300","linkedServiceRole":"service"},{"linkedServiceRole":"service"}],"serviceExtensions":[]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679300","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"N7740924R","linkedServiceRole":"group"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679300","serviceExtensionTo":"0749679399"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679400","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"},{"linkedServiceId":"N7740924R","linkedServiceRole":"group"}],"serviceExtensions":[{"serviceExtensionFrom":"0749679400","serviceExtensionTo":"0749679479"}]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assertEquals( 2  ,resp.serviceList[0].groupType.size() , '2 group should have been formed having 2 , 1 services' );
        
        
    }
    
    
    
    // Case 4 : Input with no GK1 , GK2 , GK3.
    @IsTest
    public static void test_3(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7005109R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"enterprise"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7740924R","linkedServiceRole":"group"}],"serviceExtensions":[]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7740924R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"group"},{"name":"inflight_order","value":"N"},{"name":"is_enterprise_trunk","value":"Y"},{"name":"trunk_capacity","value":"20"},{"name":"bw_eligibility_flag","value":"eligible"},{"name":"bw_eligibility_reason_code","value":""}],"devices":[],"serviceAssociations":[{"linkedServiceId":"N7005109R","linkedServiceRole":"enterprise"}],"serviceExtensions":[]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assertEquals( 1  ,resp.serviceList[0].groupType.size() , '1 group will be formed with no services' );
        
        
    }
    
    
    // Case 5 : Input with no Group and Services , only Enterprise
    @IsTest
    public static void test_4(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7005109R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"enterprise"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        if(isOsakaDormant == 'true'){
            System.assertEquals( 0 ,resp.serviceList[0].groupType.size() , 'No group will be formed' );
        }
        else{
            System.assert( resp == null );
        }        
        
    }
    
    
    
    // Case 6 : Input with only Group 
    @IsTest
    public static void test_5(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"N7740924R","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"group"},{"name":"inflight_order","value":"N"},{"name":"is_enterprise_trunk","value":"Y"},{"name":"trunk_capacity","value":"20"},{"name":"bw_eligibility_flag","value":"eligible"},{"name":"bw_eligibility_reason_code","value":""}],"devices":[],"serviceAssociations":[],"serviceExtensions":[]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assertEquals( 1  ,resp.serviceList[0].groupType.size() , '1 group will form with dummyenterprise' );
        
        
    }
    
    
    
    // Case 7 : Input with only Services   
    @IsTest
    public static void test_6(){
        //EDGE-222176 : Changes by Abhishek(Osaka) since method signature was changed.
        String finCIDN = '45789';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('746748729');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"473685095830478","servicesList":[{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679300","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679300","serviceExtensionTo":"0749679399"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679400","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679400","serviceExtensionTo":"0749679479"}]},{"cidn":"9501331855","productFamily":"TIPT-SIPC","fnn":"0749679500","site":{"siteType":"ADBOR_ID","siteId":"1234567890","linkedSiteType":"A_END_ADDRESS","linkedSiteId":"CELL 1 122 LEWIS RD KNOXFIELD"},"replicatorUpdateDateTime":"2019-07-26 11:11:49.593","account":{"accountNumber":"2323232323","complexBillingIndicator":"","creditManagementFlag":"","serviceWithEtcFlag":""},"serviceCharacteristics":[{"name":"service_association_role","value":"service"},{"name":"inflight_order","value":"N"}],"devices":[],"serviceAssociations":[],"serviceExtensions":[{"serviceExtensionFrom":"0749679500","serviceExtensionTo":"0749679599"}]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assertEquals( 1  ,resp.serviceList[0].groupType.size() , 'onw group will form which is dummy' );
        
        
    }
    //Start of EDGE-222176 by Abhishek(Osaka)
    @IsTest
    public static void tiptSipcEligibilityTest(){
        String finCIDN = '1851860118';
        List<String> selectedCidn = new List<String>();
        selectedCidn.add('1851860119');
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"7a0887911c8d8f4bfc","servicesList":[{"cidn":"1851860118","productFamily":"TIPT-SIPC","fnn":"0889561100","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"service"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null},{"linkedServiceId":"N0020270R","linkedServiceRole":"group","linkedServiceCidn":null}],"serviceExtensions":[{"serviceExtensionFrom":"0889561100","serviceExtensionTo":"0889561199"}]},{"cidn":"1851860118","productFamily":"TIPT-SIPC","fnn":"0889561200","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"service"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null},{"linkedServiceId":"N0020280R","linkedServiceRole":"group","linkedServiceCidn":null}],"serviceExtensions":[{"serviceExtensionFrom":"0889561200","serviceExtensionTo":"0889561299"}]},{"cidn":"1851860119","productFamily":"TIPT-SIPC","fnn":"N0020270R","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"eligibility_flag","value":"Yes"},{"name":"eligibility_reason","value":"WR3.2 - Trunk Pilot"},{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"group"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"0889561100","linkedServiceRole":"service","linkedServiceCidn":"1851860119"},{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null}],"serviceExtensions":[]},{"cidn":"1851860118","productFamily":"TIPT-SIPC","fnn":"N0020280R","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"eligibility_flag","value":"Yes"},{"name":"eligibility_reason","value":"WR3.2 - Trunk Pilot"},{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"group"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"0889561200","linkedServiceRole":"service","linkedServiceCidn":"1851860118"},{"linkedServiceId":"0889561299","linkedServiceRole":"service","linkedServiceCidn":"1851860118"},{"linkedServiceId":"0889561289","linkedServiceRole":"service","linkedServiceCidn":"1851860118"},{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null}],"serviceExtensions":[]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assert( getServiceDTO!=null );
        
    }
    
    @IsTest
    public static void tiptSipcEligibilityTestNegative(){
        String finCIDN = '1851860118';
        List<String> selectedCidn = new List<String>();
        ReplicatorGetServiceDTO getServiceDTO;
        getServiceDTO = ReplicatorGetServiceDTO.parse('{"correlationId":"7a0887911c8d8f4bfc","servicesList":[{"cidn":"1851860118","productFamily":"TIPT-SIPC","fnn":"0889561100","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"service"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null},{"linkedServiceId":"N0020270R","linkedServiceRole":"group","linkedServiceCidn":null}],"serviceExtensions":[{"serviceExtensionFrom":"0889561100","serviceExtensionTo":"0889561199"}]},{"cidn":"1851860118","productFamily":"TIPT-SIPC","fnn":"0889561200","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"service"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null},{"linkedServiceId":"N0020280R","linkedServiceRole":"group","linkedServiceCidn":null}],"serviceExtensions":[{"serviceExtensionFrom":"0889561200","serviceExtensionTo":"0889561299"}]},{"cidn":"1851860119","productFamily":"TIPT-SIPC","fnn":"N0020270R","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"eligibility_flag","value":"Yes"},{"name":"eligibility_reason","value":"WR3.2 - Trunk Pilot"},{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"group"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"0889561100","linkedServiceRole":"service","linkedServiceCidn":"1851860119"},{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null}],"serviceExtensions":[]},{"cidn":"1851860118","productFamily":"TIPT-SIPC","fnn":"N0020280R","site":{"siteType":"A_END_ADDRESS","siteId":"","linkedSiteType":"","linkedSiteId":""},"replicatorUpdateDateTime":"2021-03-03T21:37:50.632+11:00","account":{"accountNumber":"2660799589","complexBillingIndicator":"N","creditManagementFlag":"N","serviceWithEtcFlag":"N","dealerCode":"","adaptiveCareIndicator":"N"},"serviceCharacteristics":[{"name":"eligibility_flag","value":"Yes"},{"name":"eligibility_reason","value":"WR3.2 - Trunk Pilot"},{"name":"inflight_order","value":"N"},{"name":"service_association_role","value":"group"}],"devices":[],"repayments":[],"serviceAssociations":[{"linkedServiceId":"0889561200","linkedServiceRole":"service","linkedServiceCidn":"1851860118"},{"linkedServiceId":"0889561299","linkedServiceRole":"service","linkedServiceCidn":"1851860118"},{"linkedServiceId":"0889561289","linkedServiceRole":"service","linkedServiceCidn":"1851860118"},{"linkedServiceId":"N0011603R","linkedServiceRole":"enterprise","linkedServiceCidn":null}],"serviceExtensions":[]}]}');
        TransitionDataDTO.SiteDTOMobile resp = ReplicatorParserManagerNGUC.transformReplicatorResponseNgUc( getServiceDTO , '',finCIDN,selectedCidn);
        System.assert( getServiceDTO!=null );
        
    }
    //End of EDGE-222176 by Abhishek(Osaka)
    
}